<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>D-CASE VIEWER</title>
<link rel="stylesheet" type="text/css" href="lib/codemirror.css"/>
<link rel="stylesheet" type="text/css" href="lib/jquery.toolbars.css"/>
<link rel="stylesheet" type="text/css" href="lib/bootstrap.icons.css"/>
<link rel="stylesheet" type="text/css" href="css/dcase-node.css"/>
<link rel="stylesheet" type="text/css" href="css/viewer.css"/>
<link rel="stylesheet" type="text/css" href="css/sidemenu.css"/>
<style>
body {
	min-height: 480px;
	margin: 0px;
}
#viewer {
	left: 0px;
	top : 0px;
	width : 100%;
	height: 100%;
}
</style>
<script type="text/javascript" src="lib/jquery.min.js"></script>
<script type="text/javascript" src="lib/jquery.mousewheel.min.js"></script>
<script type="text/javascript" src="lib/jquery.toolbar.min.js"></script>
<script type="text/javascript" src="lib/codemirror.js"></script>
<script type="text/javascript" src="js/dcaseviewer.js"></script>
<script type="text/javascript" src="js/dnode.js"></script>
<script type="text/javascript" src="js/dnodeview.js"></script>
<script type="text/javascript" src="js/handler.js"></script>
<script type="text/javascript" src="js/edit.js"></script>
<script type="text/javascript" src="js/sidemenu.js"></script>
<script type="text/javascript" src="js/api.js"></script>
<script type="text/javascript" src="js/animation.js"></script>
<script type="text/javascript">

function getNodeFromServer(id) {
	var res1 = DCaseAPI.get(["Argument"]);
	//var id = res1[0].argument_id;
	//var id = "0";//FIXME
	console.log("get id=" + id);
	var res2 = DCaseAPI.get([], id);
	console.log(res2);
	var node = createNodeFromJson(res2);
	return node;
}

window.addEventListener("load",function() {
	var node = createSampleNode();
	var id = "1";
	//var node = getNodeFromServer(id);
	var opts = {
		argument_id: id,
	};
	var viewer = new DCaseViewer(document.getElementById("viewer"), node, opts);
	var menu = new SideMenu(document.body, viewer);

	$(".tool-new").click(function() {
		menu.actInsertToSelectedNode();
	});
	$(".tool-edit").click(function() {
		menu.actEditSelectedNode();
	});
	$(".tool-remove").click(function() {
		menu.actRemoveSelectedNode();
	});
	$(".tool-left").click(function() {
		menu.actPrevVersion();
	});
	$(".tool-right").click(function() {
		menu.actNextVersion();
	});

	// hide url bar for ipod touch
	setTimeout(function(){
		window.scrollTo(0, 0);
	}, 0);
});
</script>
</head>
<body>
<div id="viewer"></div>
<div id="toolbar-node-edit" style="display: none;">
	<a class="tool-new"><i class="icon-plus"></i></a>
	<a class="tool-edit"><i class="icon-edit"></i></a>
	<a class="tool-remove"><i class="icon-remove"></i></a>
	<a class="tool-left"><i class="icon-arrow-left"></i></a>
	<a class="tool-right"><i class="icon-arrow-right"></i></a>
</div>
</body>
</html>
